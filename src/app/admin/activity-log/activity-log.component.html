<div class="page-container">
    <div class="page-content flex-col gap-xl">
        <app-page-header title="إحصائيات النشاط" subtitle="سجل بجميع العمليات والإجراءات التي تمت في النظام">
        </app-page-header>

        <!-- Loading State -->
        <app-inline-loading *ngIf="isLoading" message="جاري تحميل السجلات..."></app-inline-loading>

        <!-- Empty State -->
        <app-empty-state *ngIf="!isLoading && logs.length === 0" icon="history" title="لا توجد سجلات"
            description="لم يتم تسجيل أي نشاط بعد">
        </app-empty-state>

        <!-- Table -->
        <div *ngIf="!isLoading && logs.length > 0" class="card p-0 overflow-hidden">
            <app-table [data]="logs" [columns]="columns" [loading]="isLoading">
            </app-table>

            <!-- User Template -->
            <ng-template #userInfo let-row="row">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-surface-dark flex items-center justify-center">
                        <span class="text-primary font-bold text-sm">{{ (row.userName || 'U').charAt(0) }}</span>
                    </div>
                    <span class="text-primary font-bold text-sm">{{ row.userName || 'نظام' }}</span>
                </div>
            </ng-template>

            <!-- Action Template -->
            <ng-template #actionInfo let-row="row">
                <span class="text-secondary text-sm">{{ row.action || row.message }}</span>
            </ng-template>

            <!-- Time Template -->
            <ng-template #timeInfo let-row="row">
                <span class="text-muted text-xs font-mono">{{ (row.timestamp || row.time) | date:'yyyy-MM-dd HH:mm:ss'
                    }}</span>
            </ng-template>

            <!-- Status Template -->
            <ng-template #statusInfo let-row="row">
                <app-badge [type]="getBadgeType(row.status || row.type)">
                    {{ getStatusLabel(row.status || row.type) }}
                </app-badge>
            </ng-template>
        </div>
    </div>
</div>