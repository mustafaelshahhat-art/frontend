<div class="auth-container bg-gradient-login min-h-screen flex flex-center relative overflow-hidden p-2xl">

  <!-- Background Pattern -->
  <div class="ramadan-pattern absolute inset-0"></div>

  <!-- Login Card -->
  <div class="auth-card relative z-10 w-full" [class.animate-fade-in-up]="isPageReady()">

    <!-- Header Section -->
    <header class="text-center mb-2xl">
      <div class="auth-logo gradient-primary shadow-glow mb-6 mx-auto">
        <span class="material-symbols-outlined text-4xl text-primary" aria-hidden="true">sports_soccer</span>
      </div>
      <h1 class="auth-title mb-2">أهلاً بعودتك</h1>
      <p class="text-secondary text-base">كأس رمضان لكرة القدم – بوابة الإدارة</p>
    </header>

    <div class="auth-card-body">
      <!-- Maintenance Mode Alert -->
      @if (isMaintenanceMode()) {
      <app-alert type="warning" title="وضع الصيانة" icon="build" class="mb-lg">
        النظام تحت الصيانة حالياً. الدخول متاح لمديري النظام فقط.
      </app-alert>
      }

      <!-- Error Alert -->
      @if (errorMessage()) {
      <app-alert type="danger" [dismissible]="true" [autoDismiss]="5000" (dismissed)="errorMessage.set(null)"
        class="mb-lg">
        {{ errorMessage() }}
      </app-alert>
      }
    </div>

    <!-- Login Form -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="auth-form flex flex-col gap-6">

      <!-- Email Field -->
      <!-- Added .relative class to ensure icon positioning context -->
      <!-- Email Field -->
      <app-form-control formControlName="email" label="البريد الإلكتروني" type="email" placeholder="name@example.com"
        iconLeft="mail" [error]="(email?.invalid && email?.touched) ? 'يرجى إدخال بريد إلكتروني صحيح' : undefined">
      </app-form-control>

      <!-- Password Field -->
      <app-form-control formControlName="password" label="كلمة المرور" type="password" placeholder="********"
        iconLeft="lock"
        [error]="(password?.invalid && password?.touched) ? 'كلمة المرور يجب أن تكون 6 أحرف على الأقل' : undefined">
      </app-form-control>

      <!-- Submit Button -->
      <div class="flex justify-center">
        <app-button type="submit" variant="primary" size="xl" [isLoading]="isLoading()" [disabled]="isLoading()"
          icon="arrow_back" iconPos="left">
          تسجيل الدخول
        </app-button>
      </div>

      <!-- Forgot Password (Secondary Action - Moved Below) -->
      <div class="text-center">
        <a routerLink="/auth/forgot-password"
          class="text-muted text-sm hover:text-primary transition-colors inline-block py-1" tabindex="0">
          نسيت كلمة المرور؟
        </a>
      </div>

    </form>


    <!-- Register Link -->
    @if (!isMaintenanceMode()) {
    <div class="text-center pt-6 pb-2">
      <p class="text-secondary text-sm m-0">
        ليس لديك حساب؟
        <a routerLink="/auth/register"
          class="text-gold font-bold hover:underline hover:text-gold-light transition-colors ml-1">
          إنشاء حساب جديد
        </a>
      </p>
    </div>
    }

  </div>

  <!-- Footer (Relative Flow) -->
  <div class="mt-6 text-center w-full relative z-10">
    <p class="text-muted text-xs m-0">© 2024 دوري رمضان لكرة القدم. جميع الحقوق محفوظة.</p>
  </div>

</div>