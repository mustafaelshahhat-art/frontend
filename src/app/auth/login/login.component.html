<div class="auth-container bg-gradient-login min-h-screen flex flex-center relative overflow-hidden p-2xl">

  <!-- Background Pattern -->
  <div class="ramadan-pattern absolute inset-0"></div>

  <!-- Login Card -->
  <div class="auth-card relative z-10 w-full animate-fade-in-up">

    <!-- Header Section -->
    <header class="text-center mb-2xl">
      <div class="auth-logo gradient-primary shadow-glow mb-6 mx-auto">
        <span class="material-symbols-outlined text-4xl text-primary" aria-hidden="true">sports_soccer</span>
      </div>
      <h1 class="auth-title mb-2">أهلاً بعودتك</h1>
      <p class="text-secondary text-base">كأس رمضان لكرة القدم – بوابة الإدارة</p>
    </header>

    <!-- Error Alert -->
    <div class="auth-alert-container text-right" aria-live="polite">
      <div *ngIf="errorMessage" class="mb-6 animate-fade-in">
        <app-alert type="danger" [dismissible]="true" (onClose)="errorMessage = null">
          {{ errorMessage }}
        </app-alert>
      </div>
    </div>

    <!-- Login Form -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="auth-form flex flex-col gap-6">

      <!-- Email Field -->
      <!-- Added .relative class to ensure icon positioning context -->
      <div class="relative w-full">
        <app-form-control label="البريد الإلكتروني"
          [error]="(email?.invalid && email?.touched) ? 'يرجى إدخال بريد إلكتروني صحيح' : undefined">

          <div class="relative w-full">
            <input formControlName="email" type="email" placeholder="name@example.com" autocomplete="email"
              class="form-input form-input-lg form-input-with-icon-right w-full" />

            <span class="material-symbols-outlined form-icon-right text-muted text-xl" aria-hidden="true">mail</span>
          </div>

        </app-form-control>
      </div>

      <!-- Password Field -->
      <div class="form-group w-full">
        <div class="flex justify-between items-center mb-2">
          <label class="form-label font-semibold text-sm">كلمة المرور</label>
        </div>

        <div class="relative w-full">
          <input formControlName="password" [type]="passwordVisible ? 'text' : 'password'" placeholder="********"
            autocomplete="current-password" class="form-input form-input-lg form-input-with-icon-both w-full" />

          <!-- Lock Icon (Right/Start) -->
          <span class="material-symbols-outlined form-icon-right text-brand text-xl" aria-hidden="true">lock</span>

          <!-- Visibility Toggle (Left/End) -->
          <button (click)="togglePasswordVisibility()" type="button"
            [attr.aria-label]="passwordVisible ? 'إخفاء كلمة المرور' : 'إظهار كلمة المرور'"
            class="form-icon-left flex-center cursor-pointer text-muted p-0 border-none bg-transparent hover:text-primary transition-colors">
            <span class="material-symbols-outlined text-xl">
              {{ passwordVisible ? 'visibility_off' : 'visibility' }}
            </span>
          </button>
        </div>

        <span *ngIf="password?.invalid && password?.touched" class="form-error block mt-2 text-xs text-danger">
          كلمة المرور يجب أن تكون 6 أحرف على الأقل
        </span>
      </div>

      <!-- Submit Button -->
      <app-button type="submit" variant="primary" size="xl" [fullWidth]="true" [isLoading]="isLoading"
        [disabled]="isLoading" icon="arrow_back" iconPos="left">
        تسجيل الدخول
      </app-button>

      <!-- Forgot Password (Secondary Action - Moved Below) -->
      <div class="text-center">
        <a href="#" class="text-muted text-sm hover:text-primary transition-colors inline-block py-1" tabindex="0">
          نسيت كلمة المرور؟
        </a>
      </div>

    </form>

    <!-- Visual Divider -->
    <div class="relative mt-8 mb-8 py-2">
      <div class="absolute inset-0 flex items-center" aria-hidden="true">
        <div class="w-full border-t border-subtle"></div>
      </div>
      <div class="relative flex justify-center text-xs uppercase">
        <span class="bg-card px-3 text-muted bg-opacity-90">أو تسجيل دخول سريع</span>
      </div>
    </div>

    <!-- Quick Login Buttons -->
    <div class="quick-login-grid mb-2" role="group" aria-label="خيارات تسجيل الدخول السريع">
      <button type="button" (click)="quickLogin('admin')" [disabled]="isLoading" class="quick-login-btn group">
        <span
          class="material-symbols-outlined text-2xl text-secondary group-hover:text-primary transition-colors">admin_panel_settings</span>
        <span class="text-xs font-medium text-secondary group-hover:text-primary transition-colors">أدمن</span>
      </button>

      <button type="button" (click)="quickLogin('captain')" [disabled]="isLoading" class="quick-login-btn group">
        <span
          class="material-symbols-outlined text-2xl text-secondary group-hover:text-primary transition-colors">groups</span>
        <span class="text-xs font-medium text-secondary group-hover:text-primary transition-colors">قائد</span>
      </button>

      <button type="button" (click)="quickLogin('referee')" [disabled]="isLoading" class="quick-login-btn group">
        <span
          class="material-symbols-outlined text-2xl text-secondary group-hover:text-primary transition-colors">sports</span>
        <span class="text-xs font-medium text-secondary group-hover:text-primary transition-colors">حكم</span>
      </button>

      <button type="button" (click)="quickLogin('player')" [disabled]="isLoading" class="quick-login-btn group">
        <span
          class="material-symbols-outlined text-2xl text-secondary group-hover:text-primary transition-colors">person</span>
        <span class="text-xs font-medium text-secondary group-hover:text-primary transition-colors">لاعب</span>
      </button>

      <button type="button" (click)="quickLogin('playerClub')" [disabled]="isLoading" class="quick-login-btn group">
        <span
          class="material-symbols-outlined text-2xl text-secondary group-hover:text-primary transition-colors">badge</span>
        <span class="text-xs font-medium text-secondary group-hover:text-primary transition-colors">عضو</span>
      </button>
    </div>

    <!-- Register Link -->
    <div class="text-center pt-6 pb-2">
      <p class="text-secondary text-sm m-0">
        ليس لديك حساب؟
        <a routerLink="/auth/register"
          class="text-gold font-bold hover:underline hover:text-gold-light transition-colors ml-1">
          إنشاء حساب جديد
        </a>
      </p>
    </div>

  </div>

  <!-- Footer (Relative Flow) -->
  <div class="mt-6 text-center w-full relative z-10">
    <p class="text-muted text-xs m-0">© 2024 دوري رمضان لكرة القدم. جميع الحقوق محفوظة.</p>
  </div>

</div>