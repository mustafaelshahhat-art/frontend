<div class="page-container animate-fade-in-up">
    <div class="page-content">

        <!-- Welcome Header -->
        <app-welcome-card title="لوحة القائد" subtitle="مرحباً بك، استعرض حالة فريقك" icon="groups" status="المركز #3"
            statusClass="status-dot-online">
        </app-welcome-card>

        <!-- Dashboard Grid Layout -->
        <div class="dashboard-layout-grid" *ngIf="currentUser?.teamId; else noTeamState">

            <!-- Next Match Section -->
            <app-match-card [title]="'استعد للمواجهة'" [subtitle]="'كل العيون على فريقك'" [match]="matchCardData"
                [isClickable]="false">

                <div class="match-card-actions w-full flex-wrap flex gap-sm mt-auto" actions>
                    <a [routerLink]="['/captain/matches', nextMatch.id]" class="match-card-action action-secondary">
                        <span class="material-symbols-outlined">visibility</span>
                        تفاصيل اللقاء
                    </a>
                </div>
            </app-match-card>

            <!-- Stats Grid (Secondary/Left) -->
            <div class="grid-stats">
                <app-stat-card *ngFor="let stat of stats" [label]="stat.label" [value]="stat.value" [icon]="stat.icon"
                    [colorClass]="stat.colorClass">
                </app-stat-card>
            </div>

        </div>

        <!-- No Team State for Players -->
        <ng-template #noTeamState>
            <div class="auth-card p-xl text-center border-dashed border-2 opacity-80 mt-xl">
                <span class="material-symbols-outlined text-4xl text-muted mb-4">search_off</span>
                <h2 class="text-xl font-bold mb-2">أنت لست مشتركاً في أي فريق بعد</h2>
                <p class="text-muted mb-6">يمكنك الانضمام لفريق موجود أو طلب التسجيل ككابتن لإنشاء فريقك الخاص.</p>
                <div class="flex flex-center gap-4">
                    <app-button variant="primary" size="lg">استعرض الفرق</app-button>
                    <app-button variant="outline" size="lg">طلب كابتن</app-button>
                </div>
            </div>
        </ng-template>

    </div>
</div>