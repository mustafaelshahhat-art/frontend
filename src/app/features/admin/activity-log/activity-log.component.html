<!-- Filters Template -->
<ng-template #filtersTemplate>
    <app-filter [items]="filters" [activeValue]="currentFilter" (filterChange)="setFilter($event)" />
</ng-template>

<!-- Main Content -->
<div class="flex-col gap-md">
    <!-- Loading State -->
    @if (isLoading) {
    <app-inline-loading message="جاري تحميل السجلات..." />
    }

    <!-- Empty State (No Logs at all) -->
    @if (!isLoading && logs.length === 0) {
    <app-empty-state icon="history" title="لا توجد سجلات" description="لم يتم تسجيل أي نشاط بعد" />
    }

    <!-- Empty State (No Logs matching filter) -->
    @if (!isLoading && logs.length > 0 && filteredLogs.length === 0) {
    <app-empty-state icon="search_off" title="لا توجد نتائج" description="لا توجد سجلات تطابق الفلتر المختار" />
    }

    <!-- Table -->
    @if (!isLoading && filteredLogs.length > 0) {
    <div class="card p-0 overflow-hidden">
        <app-table [data]="filteredLogs" [columns]="columns" [loading]="isLoading" />
    </div>
    }
</div>

<!-- User Template -->
<ng-template #userInfo let-row="row">
    <div class="flex items-center gap-3">
        <div class="w-8 h-8 rounded-full bg-surface-dark flex items-center justify-center">
            <span class="text-primary font-bold text-sm">{{ (row.userName || 'U').charAt(0) }}</span>
        </div>
        <span class="text-primary font-bold text-sm">{{ row.userName || 'نظام' }}</span>
    </div>
</ng-template>

<!-- Action Template -->
<ng-template #actionInfo let-row="row">
    <span class="text-secondary text-sm">{{ row.action || row.message }}</span>
</ng-template>

<!-- Time Template -->
<ng-template #timeInfo let-row="row">
    <div class="flex flex-col">
        <span class="text-primary text-xs font-bold">{{ row.timestamp | timeAgo }}</span>
        <span class="text-muted text-[10px] font-mono">{{ row.timestamp | date:'yyyy-MM-dd HH:mm:ss' }}</span>
    </div>
</ng-template>

<!-- Status Template -->
<ng-template #statusInfo let-row="row">
    <app-badge [type]="getBadgeType(row.status || row.type)">
        {{ getStatusLabel(row.status || row.type) }}
    </app-badge>
</ng-template>