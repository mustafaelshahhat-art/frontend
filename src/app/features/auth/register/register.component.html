<div class="auth-container bg-gradient-login">
    <!-- Background Pattern -->
    <div class="ramadan-pattern"></div>

    <!-- Register Card -->
    <div class="auth-card" [class.animate-fade-in-up]="isPageReady()">
        <!-- Header Section -->
        <header class="text-center mb-xl flex flex-col items-center">
            <div class="auth-logo gradient-primary shadow-glow mx-auto">
                <app-icon name="sports_soccer" class="text-4xl text-primary icon-sm"></app-icon>
            </div>
            <h1 class="auth-title">بطولة رمضان</h1>
            <p class="text-secondary text-base">إنشاء حساب جديد للمشاركة في البطولة</p>
        </header>

        <!-- Registration Form (Always Player) -->
        <div class="form-container-inner" [class.animate-slide-in-left]="isPageReady()">
            <div class="form-header-inner text-center">
                <div class="avatar avatar-lg gradient-primary mx-auto mb-4 rounded-2xl flex-center step-avatar">
                    <app-icon name="person_add" class="text-xl text-primary icon-sm"></app-icon>
                </div>
                <h2 class="form-step-title">بيانات اللاعب</h2>
                <p class="form-step-subtitle">أدخل بياناتك الشخصية لإتمام التسجيل في البطولة</p>
            </div>

            <form (ngSubmit)="onSubmit()" #registerForm="ngForm">
                <div class="form-grid">
                    <!-- Full Name -->
                    <div class="form-group grid-col-span-2">
                        <app-form-control label="الاسم رباعي" name="name" [ngModel]="form.name()"
                            (ngModelChange)="form.name.set($event)" required
                            placeholder="أدخل اسمك بالكامل كما في البطاقة" autocomplete="name" iconLeft="person" />
                    </div>

                    <!-- Phone -->
                    <div class="form-group">
                        <app-form-control label="رقم الهاتف" type="tel" name="phone" [ngModel]="form.phone()"
                            (ngModelChange)="form.phone.set($event)" required placeholder="05xxxxxxxx" iconLeft="phone"
                            autocomplete="tel" />
                    </div>

                    <!-- Email -->
                    <div class="form-group">
                        <app-form-control label="البريد الإلكتروني" type="email" name="email" [ngModel]="form.email()"
                            (ngModelChange)="form.email.set($event)" required placeholder="example@mail.com"
                            iconLeft="mail" />
                    </div>

                    <!-- National ID -->
                    <div class="form-group">
                        <app-form-control label="الرقم القومي" type="text" name="nationalId"
                            [ngModel]="form.nationalId()" (ngModelChange)="form.nationalId.set($event)" required
                            placeholder="14 رقم" iconLeft="badge" autocomplete="off" />
                    </div>

                    <!-- Age -->
                    <div class="form-group">
                        <app-form-control label="العمر" type="number" name="age" [ngModel]="form.age()"
                            (ngModelChange)="form.age.set($event)" required placeholder="سنوات" iconLeft="history" />
                    </div>

                    <!-- Governorate -->
                    <div class="form-group">
                        <label class="form-label" for="governorate">المحافظة</label>
                        <app-select id="governorate" name="governorateId" [options]="governorateOptions()"
                            [ngModel]="form.governorateId()" (ngModelChange)="onGovChange($event)"
                            placeholder="اختر المحافظة" />
                    </div>

                    <!-- City -->
                    <div class="form-group">
                        <label class="form-label" for="city">المدينة</label>
                        <app-select id="city" name="cityId" [options]="cityOptions()" [ngModel]="form.cityId()"
                            (ngModelChange)="onCityChange($event)" [disabled]="!form.governorateId()"
                            [loading]="isLoadingCities()" placeholder="اختر المدينة" />
                    </div>

                    <!-- Area -->
                    <div class="form-group">
                        <label class="form-label" for="area">الحي / المنطقة</label>
                        <app-select id="area" name="areaId" [options]="areaOptions()"
                            [ngModel]="form.areaId()" (ngModelChange)="form.areaId.set($event)"
                            [disabled]="!form.cityId()" [loading]="isLoadingAreas()" placeholder="اختر الحي" />
                    </div>

                    <!-- Password -->
                    <div class="form-group">
                        <app-form-control label="كلمة المرور" type="password" name="password"
                            [ngModel]="form.password()" (ngModelChange)="form.password.set($event)"
                            placeholder="••••••••" required />
                    </div>

                    <!-- Confirm Password -->
                    <div class="form-group">
                        <app-form-control label="تأكيد كلمة المرور" type="password" name="confirmPassword"
                            [ngModel]="form.confirmPassword()" (ngModelChange)="form.confirmPassword.set($event)"
                            placeholder="••••••••" required autocomplete="new-password" />
                    </div>
                </div>

                <!-- ID Photos -->
                <div class="file-upload-grid mb-6">
                    <div class="file-upload-box" [class.has-file]="form.idFront()" (click)="frontInput.click()"
                        (keyup.enter)="frontInput.click()" tabindex="0">
                        <input type="file" #frontInput hidden (change)="onFileChange($event, 'idFront')"
                            accept="image/*">
                        <app-icon [name]=" form.idFront() ? 'check_circle' :
                            'badge' " class="file-upload-icon icon-sm"></app-icon>
                        <p class="file-upload-text">{{ form.idFront() ? 'تم رفع الوجه الأمامي' : 'صورة الوجه الأمامي' }}
                        </p>
                    </div>

                    <div class="file-upload-box" [class.has-file]="form.idBack()" (click)="backInput.click()"
                        (keyup.enter)="backInput.click()" tabindex="0">
                        <input type="file" #backInput hidden (change)="onFileChange($event, 'idBack')" accept="image/*">
                        <app-icon [name]=" form.idBack() ? 'check_circle' :
                            'badge' " class="file-upload-icon icon-sm"></app-icon>
                        <p class="file-upload-text">{{ form.idBack() ? 'تم رفع الوجه الخلفي' : 'صورة الوجه الخلفي' }}
                        </p>
                    </div>
                </div>


                <div class="flex justify-center">
                    <app-button type="submit" variant="primary" size="xl" [isLoading]="isLoading()"
                        [disabled]="isLoading() || !registerForm.valid">
                        إرسال طلب التسجيل
                    </app-button>
                </div>

                <div class="text-center mt-4">
                    <p class="text-secondary text-sm">
                        لديك حساب بالفعل؟
                        <a routerLink="/auth/login" class="text-gold font-bold hover:underline ml-1">تسجيل الدخول</a>
                    </p>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="auth-footer">
        <p class="text-muted text-xs m-0">© 2024 دوري رمضان لكرة القدم. جميع الحقوق محفوظة.</p>
    </footer>
</div>