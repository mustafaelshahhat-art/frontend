<!-- Filters Template -->
<ng-template #filtersTemplate>
    <app-filter [items]="filters" [activeValue]="selectedFilter()" (filterChange)="setFilter($event)" />
</ng-template>

<!-- Actions Template -->
<ng-template #actionsTemplate>
    <div class="flex items-center gap-2">
        @if (unreadCount > 0) {
        <app-button variant="outline" size="sm" icon="done_all" (click)="markAllAsRead()">
            تحديد الكل كمقروء
        </app-button>
        <app-badge type="danger" [pulse]="true">{{ unreadCount }} تنبيه جديد</app-badge>
        }
    </div>
</ng-template>

<!-- Main Content -->
<div class="flex-col gap-md">
    <!-- Loading State -->
    @if (isLoading()) {
    <app-inline-loading message="جاري تحميل التنبيهات..." />
    }

    <!-- Empty State -->
    @if (!isLoading() && notifications.length === 0) {
    <app-empty-state icon="notifications_off" title="لا توجد تنبيهات"
        description="مركز التنبيهات الخاص بك فارغ حالياً. سنقوم بإبلاغك بأي مستجدات هنا." />
    }

    <!-- Notifications List -->
    @if (!isLoading() && notifications.length > 0) {
    <div class="notifications-list flex-col gap-md">
        @for (notif of notifications; track notif.id) {
        <app-card class="notification-item" [class.unread]="!notif.isRead" (click)="markAsRead(notif)"
            [isClickable]="true">

            <div class="notification-content-wrapper">
                <div class="notif-icon-box" [attr.data-type]="notif.type">
                    <app-icon [name]=" getIcon(notif.type) " class=" icon-sm"></app-icon>
                </div>
                <div class="notif-details">
                    <div class="notif-header">
                        <h3>{{ notif.title }}</h3>
                        <span class="notif-time">{{ notif.createdAt | timeAgo }}</span>
                    </div>
                    <p>{{ notif.message }}</p>
                </div>
            </div>
        </app-card>
        }
    </div>
    }
</div>