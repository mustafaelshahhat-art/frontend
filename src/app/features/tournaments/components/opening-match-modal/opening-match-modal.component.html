<app-modal [visible]="isVisible" title="تحديد مباراة الافتتاح" size="lg" [allowOverflow]="true"
    (closeRequest)="close.emit()">

    <div class="modal-body-custom">
        @if (tournament.openingTeamAId && tournament.openingTeamBId) {
        <div class="text-center mb-4">
            <app-badge type="success" size="sm">تم اختيار مباراة الافتتاح سابقاً</app-badge>
        </div>
        }

        <div class="premium-alert">
            <div class="alert-icon">
                <app-icon name="info"></app-icon>
            </div>
            <div class="alert-content">
                <p>قواعد مباراة الافتتاح</p>
                <span class="sub-text">سيتم استبعاد الفريقين المختارين من القرعة ووضعهما معاً في المجموعة الأولى
                    رسمياً.</span>
            </div>
        </div>

        <div class="match-stage">
            <!-- Home Team -->
            <div class="team-card home">
                <span class="team-label">صاحب الأرض</span>
                <div class="avatar-placeholder" [class.active]="teamAId">
                    <app-icon name="shield"></app-icon>
                </div>
                <div class="select-wrapper">
                    <app-select [(ngModel)]="teamAId" [options]="availableTeams" placeholder="اختر الفريق">
                    </app-select>
                </div>
            </div>

            <!-- VS Center -->
            <div class="vs-container">
                <div class="vs-circle" [class.highlight]="teamAId && teamBId">
                    VS
                </div>
            </div>

            <!-- Away Team -->
            <div class="team-card away">
                <span class="team-label">الضيف</span>
                <div class="avatar-placeholder" [class.active]="teamBId">
                    <app-icon name="person"></app-icon>
                </div>
                <div class="select-wrapper">
                    <app-select [(ngModel)]="teamBId" [options]="availableTeams" placeholder="اختر الفريق">
                    </app-select>
                </div>
            </div>
        </div>

        <div class="error-container">
            @if(errorMessage) {
            <span class="error-msg">
                <app-icon name="error_outline" size="xs"></app-icon>
                {{ errorMessage }}
            </span>
            }
        </div>
    </div>

    <div modal-footer class="footer-actions">
        <app-button variant="ghost" (click)="close.emit()">إلغاء</app-button>
        <app-button variant="primary" [disabled]="!canSubmit()" (click)="onSubmit()">
            تثبيت الافتتاح
        </app-button>
    </div>
</app-modal>