<div class="manage-tournament-page">
    <app-page-header [title]="isEditMode() ? 'تعديل البطولة' : 'إنشاء بطولة جديدة'"
        [subtitle]="isEditMode() ? 'تحديث بيانات وقوانين البطولة' : 'قم بإدخال تفاصيل البطولة الجديدة لبدء التسجيل'"
        [showBack]="true" (back)="cancel()">
    </app-page-header>

    <div class="form-container">
        <form [formGroup]="tournamentForm" (ngSubmit)="onSubmit()">
            <div class="form-grid">
                <!-- Basic Info -->
                <app-card title="المعلومات الأساسية" class="form-section">
                    <div class="fields-grid">
                        <app-form-control label="اسم البطولة" iconLeft="emoji_events" formControlName="name"
                            [control]="tournamentForm.get('name')" placeholder="مثلاً: بطولة رمضان الكبرى">
                        </app-form-control>

                        <app-form-control label="الموقع" iconLeft="location_on" formControlName="location"
                            [control]="tournamentForm.get('location')" placeholder="مثلاً: الرياض، ملعب الربوة">
                        </app-form-control>

                        <app-form-control label="وصف البطولة" iconLeft="description" type="textarea" class="full-width"
                            formControlName="description" [control]="tournamentForm.get('description')" [rows]="3"
                            placeholder="اكتب وصفاً مختصراً للبطولة...">
                        </app-form-control>
                    </div>
                </app-card>

                <!-- Dates & Capacity -->
                <app-card title="التواريخ والسعة" class="form-section">
                    <div class="fields-grid">
                        <app-form-control label="تاريخ البدء" iconLeft="calendar_today" type="date"
                            formControlName="startDate" [control]="tournamentForm.get('startDate')">
                        </app-form-control>

                        <app-form-control label="تاريخ الانتهاء" iconLeft="event_busy" type="date"
                            formControlName="endDate" [control]="tournamentForm.get('endDate')">
                        </app-form-control>

                        <app-form-control label="أخر موعد للتسجيل" iconLeft="timer" type="date"
                            formControlName="registrationDeadline"
                            [control]="tournamentForm.get('registrationDeadline')">
                        </app-form-control>

                        <app-form-control label="عدد الفرق الأقصى" iconLeft="groups" type="number"
                            formControlName="maxTeams" [control]="tournamentForm.get('maxTeams')">
                        </app-form-control>
                    </div>
                </app-card>

                <!-- Financials & Rules -->
                <app-card title="الرسوم والقوانين" class="form-section">
                    <div class="fields-grid">
                        <app-form-control label="رسوم الاشتراك (ريال)" iconLeft="payments" type="number"
                            formControlName="entryFee" [control]="tournamentForm.get('entryFee')">
                        </app-form-control>

                        <app-form-control label="قوانين البطولة" iconLeft="gavel" type="textarea" class="full-width"
                            formControlName="rules" [control]="tournamentForm.get('rules')" [rows]="4"
                            placeholder="اكتب شروط وقوانين البطولة هنا...">
                        </app-form-control>

                        <app-form-control label="جوائز البطولة" iconLeft="workspace_premium" type="textarea"
                            class="full-width" formControlName="prizes" [control]="tournamentForm.get('prizes')"
                            [rows]="3" placeholder="مثلاً: المركز الأول: 5000 ريال، المركز الثاني: 3000 ريال...">
                        </app-form-control>
                    </div>
                </app-card>

                <!-- Action Buttons -->
                <div class="form-actions">
                    <app-button variant="outline" type="button" (onClick)="cancel()">إلغاء</app-button>
                    <app-button variant="primary" type="submit" [disabled]="tournamentForm.invalid || isSubmitting()">
                        {{ isSubmitting() ? 'جاري الحفظ...' : (isEditMode() ? 'حفظ التغييرات' : 'إنشاء البطولة') }}
                    </app-button>
                </div>
            </div>
        </form>
    </div>
</div>