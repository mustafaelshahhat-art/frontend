<!-- Mobile Overlay -->
<div *ngIf="isSidebarOpen && isMobile" (click)="closeSidebar()" class="overlay"></div>

<div class="app-layout bg-gradient-page">

    <!-- Sidebar -->
    <app-sidebar [isOpen]="isSidebarOpen" [isMobile]="isMobile" [navItems]="navItems" [currentUser]="currentUser()"
        brandSubtitle="لوحة الإدارة" userRoleLabel="مدير النظام" (close)="closeSidebar()" (logout)="handleLogout()">
    </app-sidebar>

    <!-- Main Content Area -->
    <div class="app-main" [class.mr-sidebar]="!isMobile">

        <!-- Header -->
        <app-header [isMobile]="isMobile" [windowSize]="windowSize" title="لوحة الإدارة" [unreadCount]="unreadCount()"
            [notifications]="notifications()" (toggleSidebar)="toggleSidebar()"
            (viewNotification)="viewNotification($event)" (viewAllNotifications)="viewAllNotifications()">

            <div breadcrumbs class="flex items-center gap-2">
                <span class="text-muted text-lg">/</span>
                <app-breadcrumb></app-breadcrumb>
            </div>
        </app-header>

        <!-- Page Content (Scrollable) -->
        <!-- Page Content (Scrollable) -->
        <main class="app-content">
            <div class="admin-page-container">
                <!-- Header Section -->
                <app-page-header *ngIf="layout.title()" [title]="layout.title()" [subtitle]="layout.subtitle()">
                    <!-- Actions Slot -->
                    <ng-container *ngTemplateOutlet="layout.actionsTemplate() || null"></ng-container>
                </app-page-header>

                <div class="admin-page-content">
                    <!-- Filters Section -->
                    <div class="admin-toolbar" *ngIf="layout.filtersTemplate()">
                        <ng-container *ngTemplateOutlet="layout.filtersTemplate() || null"></ng-container>
                    </div>

                    <!-- Content Section -->
                    <router-outlet></router-outlet>
                </div>
            </div>
        </main>

    </div>

</div>