<!-- Mobile Overlay -->
<div *ngIf="isSidebarOpen && isMobile" (click)="closeSidebar()" class="overlay"></div>

<div class="app-layout bg-gradient-page">

    <!-- Sidebar -->
    <app-sidebar [isOpen]="isSidebarOpen" [isMobile]="isMobile" [navItems]="filteredNavItems"
        [currentUser]="currentUser" brandSubtitle="لوحة القائد" userRoleLabel="قائد الفريق" (close)="closeSidebar()"
        (logout)="handleLogout()">
    </app-sidebar>

    <!-- Main Content Area -->
    <div class="app-main" [class.mr-sidebar]="!isMobile">

        <!-- Header -->
        <app-header [isMobile]="isMobile" [windowSize]="windowSize" title="لوحة القائد" [unreadCount]="unreadCount()"
            [notifications]="notifications()" (toggleSidebar)="toggleSidebar()"
            (viewNotification)="viewNotification($event)" (viewAllNotifications)="viewAllNotifications()">

            <div breadcrumbs class="flex items-center gap-2">
                <span class="text-muted text-lg">/</span>
                <span class="badge badge-primary">الرئيسية</span>
            </div>
        </app-header>

        <!-- Pending Approval Alert -->
        <div *ngIf="isPending" class="pending-banner animate-fade-in-down">
            <div class="flex items-center gap-3">
                <i class="material-icons text-gold">info_outline</i>
                <div class="flex-col">
                    <span class="font-bold text-sm">حسابك قيد المراجعة</span>
                    <span class="text-xs opacity-90">يمكنك تصفح النظام فقط، سيتم توفير كافة الصلاحيات فور تفعيل حسابك من
                        قبل الإدارة.</span>
                </div>
            </div>
            <div class="pending-badge">وضع الاطلاع فقط</div>
        </div>

        <!-- Page Content (Scrollable) -->
        <main class="app-content p-4">
            <router-outlet></router-outlet>
        </main>

    </div>

</div>