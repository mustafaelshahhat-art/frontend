<header class="header">

  <div class="header-main-group">
    <!-- Menu Button (Mobile) -->
    @if (isMobile && showSidebarToggle) {
    <button (click)="handleToggleSidebar()" class="header-menu-btn">
      <app-icon name="menu_open" class=" icon-sm"></app-icon>
    </button>
    }

    <!-- Breadcrumbs/Title -->
    @if (windowSize >= 768) {
    <div class="flex items-center gap-3">
      <h2 class="header-title">{{ title }}</h2>
      <ng-content select="[breadcrumbs]" />
    </div>
    }

    <!-- Search Bar (Responsive) -->
    @if (windowSize >= 640) {
    <app-search placeholder="البحث..." />
    }
  </div>

  <!-- Centered Brand (Mobile) -->
  @if (isMobile) {
  <a routerLink="/" class="header-brand">
    <img src="assets/branding/logo-64.webp" alt="Kora Zone 365" width="32" height="32" class="header-brand-logo">
    <span class="header-brand-text">Kora Zone<span class="text-primary">365</span></span>
  </a>
  }

  <div class="header-actions">
    <!-- Notifications Button -->
    <div class="relative notifications-wrapper">
      <button (click)="toggleNotifications()" class="header-btn">
        <app-icon name="notifications" class="text-xl icon-sm"></app-icon>
        @if (unreadCount > 0) {
        <span class="header-btn-badge">{{ unreadCount > 99 ? '99+' : unreadCount }}</span>
        }
      </button>

      <!-- Notifications Dropdown -->
      <app-notifications-dropdown [isOpen]="showNotifications" [isMobile]="isMobile" [unreadCount]="unreadCount"
        [notifications]="notifications" (dropdownClosed)="showNotifications = false"
        (viewNotification)="handleViewNotification($event)" (viewAll)="handleViewAllNotifications()" />
    </div>

  </div>
</header>