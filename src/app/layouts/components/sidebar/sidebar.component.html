<aside [class.open]="isOpen" class="sidebar" [class.sidebar-mobile]="isMobile">
  <div class="sidebar-inner">

    <!-- Close Button (Mobile) -->
    @if (isMobile) {
    <button (click)="handleClose()" class="sidebar-close">
      <app-icon name="close" class=" icon-sm"></app-icon>
    </button>
    }

    <div class="sidebar-content">
      <!-- Logo & Brand -->
      <div class="sidebar-brand">
        <div class="sidebar-brand-icon">
          <img src="assets/branding/logo-64.webp" alt="Kora Zone 365" width="40" height="40" class="sidebar-logo-img">
        </div>
        <div class="flex-col">
          <h1 class="sidebar-brand-text">Kora<br>Zone 365</h1>
          <p class="text-brand text-xs font-bold uppercase mt-1 tracking-wide">{{ brandSubtitle }}</p>
        </div>
      </div>

      <!-- Navigation Links -->
      <nav class="sidebar-nav">
        @for (item of navItems; track item.label) {
        <a [routerLink]="item.route" [routerLinkActiveOptions]="{exact: item.exact ?? true}" routerLinkActive="active"
          #rla="routerLinkActive" (click)="handleClose()" class="sidebar-nav-item">
          <app-icon [name]=" item.icon " class="sidebar-nav-icon icon-sm"></app-icon>
          <span class="sidebar-nav-label">{{ item.label }}</span>
        </a>
        }
      </nav>
    </div>

    <!-- Bottom Section -->
    <div class="sidebar-footer">
      <!-- User Profile Card -->
      <a class="sidebar-profile hover-lift" [routerLink]="profileRouteValue" (click)="isMobile && handleClose()"
        (keydown.enter)="isMobile && handleClose()"
        (keydown.space)="$event.preventDefault(); isMobile && handleClose()">
        <div class="sidebar-profile-avatar-wrapper">
          <div class="user-initial-badge user-initial-badge--xs" [attr.data-user-id]="currentUser?.id">
            <app-icon name="person" class="badge-icon"></app-icon>
          </div>
        </div>
        <div class="sidebar-profile-info">
          <p class="sidebar-profile-name">{{ currentUser?.name || 'المستخدم' }}</p>
          <div class="flex items-center gap-2">
            <p class="text-brand font-mono text-xs font-bold">{{ currentUser?.displayId }}</p>
            <span class="status-dot"></span>
            <p class="text-muted text-xs font-semibold">{{ roleLabel }}</p>
          </div>
        </div>
      </a>

      <!-- Logout Button -->
      <button type="button" (click)="handleLogout()" class="sidebar-logout">
        <app-icon name="logout" class="text-xl icon-sm"></app-icon>
        <span>تسجيل الخروج</span>
      </button>
    </div>
  </div>
</aside>