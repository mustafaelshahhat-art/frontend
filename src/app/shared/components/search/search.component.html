<div class="search-container flex-1 mr-3">
    <app-icon name="search" class="search-icon icon-sm"></app-icon>
    <input type="text" [placeholder]="placeholder" [value]="value" (input)="onInput($event)" (focus)="onFocus()"
        class="search-input" />
    @if (value) {
    <button (click)="clearSearch()" class="search-clear">
        <app-icon name="close" class=" icon-sm"></app-icon>
    </button>
    }

    <!-- Search Results Dropdown -->
    @if (showDropdown) {
    <div class="search-dropdown">
        <!-- Loading State -->
        @if (isSearching()) {
        <div class="search-loading">
            <span class="loading-spinner"></span>
            <span>جاري البحث...</span>
        </div>
        }

        <!-- Results -->
        @if (!isSearching()) {
        <ng-container>
            @if (searchResults().length === 0) {
            <div class="search-empty">
                <app-icon name="search_off" class=" icon-sm"></app-icon>
                <span>لا توجد نتائج</span>
            </div>
            }

            @for (result of searchResults(); track result.id) {
            <div (click)="navigateToResult(result)" (keyup.enter)="navigateToResult(result)" tabindex="0"
                class="search-result-item">
                <app-icon [name]=" result.icon " class="result-icon icon-sm"></app-icon>
                <div class="result-content">
                    <span class="result-title">{{ result.title }}</span>
                    @if (result.subtitle) {
                    <span class="result-subtitle">{{ result.subtitle }}</span>
                    }
                </div>
                <span class="result-type-badge">{{ result.type === 'tournament' ? 'بطولة' : result.type === 'match' ?
                    'مباراة' : result.type === 'team' ? 'فريق' : 'مستخدم' }}</span>
            </div>
            }
        </ng-container>
        }
    </div>
    }
</div>