<div class="select-wrapper" #selectRef [class.select-wrapper--open]="isOpen" [class.select-wrapper--disabled]="disabled"
    [class.select-wrapper--error]="error">
    <div class="select-trigger" (click)="toggle()" (keyup.enter)="toggle()" tabindex="0"
        [class.has-value]="selectedValue !== null">
        <div class="select-content">
            @if (!selectedValue) {
            <span class="placeholder">{{ placeholder }}</span>
            }
            @if (selectedValue) {
            <span class="selected-label">{{ selectedLabel }}</span>
            }
        </div>

        <div class="select-actions">
            @if (loading) {
            <span class="spinner-sm"></span>
            }
            <app-icon name="expand_more" class="chevron icon-sm"></app-icon>
        </div>
    </div>

    @if (isOpen) {
    <div class="options-dropdown animate-fade-in">
        <div class="options-list custom-scrollbar">
            @if (options.length === 0) {
            <div class="no-options">لا توجد خيارات</div>
            }

            @for (option of options; track option.value) {
            <div class="option-item" [class.selected]="option.value === selectedValue" (click)="selectOption(option)"
                (keyup.enter)="selectOption(option)" tabindex="0">

                @if (option.icon) {
                <app-icon [name]=" option.icon " class="option-icon icon-sm"></app-icon>
                }
                <span class="option-label">{{ option.label }}</span>

                @if (option.value === selectedValue) {
                <app-icon name="check" class="check-icon icon-sm"></app-icon>
                }
            </div>
            }
        </div>
    </div>
    }
</div>